(function(){window.PZcity={},PZcity.allCity=["北京|beijing|bj","上海|shanghai|sh","重庆|chongqing|cq","深圳|shenzhen|sz","广州|guangzhou|gz","杭州|hangzhou|hz","南京|nanjing|nj","苏州|shuzhou|sz","天津|tianjin|tj","成都|chengdu|cd","南昌|nanchang|nc","三亚|sanya|sy","青岛|qingdao|qd","厦门|xiamen|xm","西安|xian|xa","长沙|changsha|cs","合肥|hefei|hf","西藏|xizang|xz","内蒙古|neimenggu|nmg","安庆|anqing|aq","阿泰勒|ataile|atl","安康|ankang|ak","阿克苏|akesu|aks","包头|baotou|bt","北海|beihai|bh","百色|baise|bs","保山|baoshan|bs","长治|changzhi|cz","长春|changchun|cc","常州|changzhou|cz","昌都|changdu|cd","朝阳|chaoyang|cy","常德|changde|cd","长白山|changbaishan|cbs","赤峰|chifeng|cf","大同|datong|dt","大连|dalian|dl","达县|daxian|dx","东营|dongying|dy","大庆|daqing|dq","丹东|dandong|dd","大理|dali|dl","敦煌|dunhuang|dh","鄂尔多斯|eerduosi|eeds","恩施|enshi|es","福州|fuzhou|fz","阜阳|fuyang|fy","贵阳|guiyang|gy","桂林|guilin|gl","广元|guangyuan|gy","格尔木|geermu|gem","呼和浩特|huhehaote|hhht","哈密|hami|hm","黑河|heihe|hh","海拉尔|hailaer|hle","哈尔滨|haerbin|heb","海口|haikou|hk","黄山|huangshan|hs","邯郸|handan|hd","汉中|hanzhong|hz","和田|hetian|ht","晋江|jinjiang|jj","锦州|jinzhou|jz","景德镇|jingdezhen|jdz","嘉峪关|jiayuguan|jyg","井冈山|jinggangshan|jgs","济宁|jining|jn","九江|jiujiang|jj","佳木斯|jiamusi|jms","济南|jinan|jn","喀什|kashi|ks","昆明|kunming|km","康定|kangding|kd","克拉玛依|kelamayi|klmy","库尔勒|kuerle|kel","库车|kuche|kc","兰州|lanzhou|lz","洛阳|luoyang|ly","丽江|lijiang|lj","林芝|linzhi|lz","柳州|liuzhou|lz","泸州|luzhou|lz","连云港|lianyungang|lyg","黎平|liping|lp","连成|liancheng|lc","拉萨|lasa|ls","临沧|lincang|lc","临沂|linyi|ly","芒市|mangshi|ms","牡丹江|mudanjiang|mdj","满洲里|manzhouli|mzl","绵阳|mianyang|my","梅县|meixian|mx","漠河|mohe|mh","南充|nanchong|nc","南宁|nanning|nn","南阳|nanyang|ny","南通|nantong|nt","那拉提|nalati|nlt","宁波|ningbo|nb","攀枝花|panzhihua|pzh","衢州|quzhou|qz","秦皇岛|qinhuangdao|qhd","庆阳|qingyang|qy","齐齐哈尔|qiqihaer|qqhe","石家庄|shijiazhuang|sjz","沈阳|shenyang|sy","思茅|simao|sm","铜仁|tongren|tr","塔城|tacheng|tc","腾冲|tengchong|tc","台州|taizhou|tz","通辽|tongliao|tl","太原|taiyuan|ty","威海|weihai|wh","梧州|wuzhou|wz","文山|wenshan|ws","无锡|wuxi|wx","潍坊|weifang|wf","武夷山|wuyishan|wys","乌兰浩特|wulanhaote|wlht","温州|wenzhou|wz","乌鲁木齐|wulumuqi|wlmq","万州|wanzhou|wz","乌海|wuhai|wh","兴义|xingyi|xy","西昌|xichang|xc","襄樊|xiangfan|xf","西宁|xining|xn","锡林浩特|xilinhaote|xlht","西双版纳|xishuangbanna|xsbn","徐州|xuzhou|xz","义乌|yiwu|yw","永州|yongzhou|yz","榆林|yulin|yl","延安|yanan|ya","运城|yuncheng|yc","烟台|yantai|yt","银川|yinchuan|yc","宜昌|yichang|yc","宜宾|yibin|yb","盐城|yancheng|yc","延吉|yanji|yj","玉树|yushu|ys","伊宁|yining|yn","珠海|zhuhai|zh","昭通|zhaotong|zt","张家界|zhangjiajie|zjj","舟山|zhoushan|zs","郑州|zhengzhou|zz","中卫|zhongwei|zw","芷江|zhijiang|zj","湛江|zhanjiang|zj","沭阳|shuyang|sy"],PZcity._m={$:function(e,t){var n,r,i=[],s,o=e.substring(1);t=t||document;if(typeof e=="string")switch(e.charAt(0)){case"#":return document.getElementById(o);case".":if(t.getElementsByClassName)return t.getElementsByClassName(o);n=PZcity._m.$("*",t),r=n.length;for(s=0;s<r;s++)n[s].className.indexOf(o)>-1&&i.push(n[s]);return i;default:return t.getElementsByTagName(e)}},on:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},getEvent:function(e){return e||window.event},getTarget:function(e){return e.target||e.srcElement},getPos:function(e){var t=document.documentElement.scrollLeft||document.body.scrollLeft,n=document.documentElement.scrollTop||document.body.scrollTop,r=e.getBoundingClientRect();return{top:r.top+n,right:r.right+t,bottom:r.bottom+n,left:r.left+t}},addClass:function(e,t){if(!t)return;t.className=PZcity._m.hasClass(e,t)?t.className:t.className+" "+e},removeClass:function(e,t){var n=new RegExp("(^|\\s+)"+e+"(\\s+|$)","g");if(!PZcity._m.hasClass(e,t))return;t.className=n.test(t.className)?t.className.replace(n,""):t.className},hasClass:function(e,t){return!t||!t.className?!1:t.className.indexOf(e)>-1},stopPropagation:function(e){e=e||window.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},trim:function(e){return e.replace(/^\s+|\s+$/g,"")}},PZcity.regEx=/^([\u4E00-\u9FA5\uf900-\ufa2d]+)\|(\w+)\|(\w)\w*$/i,PZcity.regExChiese=/([\u4E00-\u9FA5\uf900-\ufa2d]+)/,function(){var e=PZcity.allCity,t,n,r=PZcity.regEx,i=/^[a-h]$/i,s=/^[i-p]$/i,o=/^[q-z]$/i;if(!PZcity.oCity){PZcity.oCity={hot:{},ABCDEFGH:{},IJKLMNOP:{},QRSTUVWXYZ:{}};for(var u=0,a=e.length;u<a;u++)t=r.exec(e[u]),n=t[3].toUpperCase(),i.test(n)?(PZcity.oCity.ABCDEFGH[n]||(PZcity.oCity.ABCDEFGH[n]=[]),PZcity.oCity.ABCDEFGH[n].push(t[1])):s.test(n)?(PZcity.oCity.IJKLMNOP[n]||(PZcity.oCity.IJKLMNOP[n]=[]),PZcity.oCity.IJKLMNOP[n].push(t[1])):o.test(n)&&(PZcity.oCity.QRSTUVWXYZ[n]||(PZcity.oCity.QRSTUVWXYZ[n]=[]),PZcity.oCity.QRSTUVWXYZ[n].push(t[1])),u<8&&(PZcity.oCity.hot.hot||(PZcity.oCity.hot.hot=[]),PZcity.oCity.hot.hot.push(t[1]))}}(),PZcity._template=['<p class="tip">热门城市(支持汉字/拼音)</p>',"<ul>",'<li class="on">热门城市</li>',"<li>ABCDEFGH</li>","<li>IJKLMNOP</li>","<li>QRSTUVWXYZ</li>","</ul>"],PZcity.CitySelector=function(){this.initialize.apply(this,arguments)},PZcity.CitySelector.prototype={constructor:PZcity.CitySelector,initialize:function(e){var t=e.input;this.input=PZcity._m.$("#"+t),this.inputEvent()},createWarp:function(){var e=PZcity._m.getPos(this.input),t=this.rootDiv=document.createElement("div"),n=this;PZcity._m.on(this.rootDiv,"click",function(e){PZcity._m.stopPropagation(e)}),PZcity._m.on(document,"click",function(e){e=PZcity._m.getEvent(e);var t=PZcity._m.getTarget(e);if(t==n.input)return!1;n.cityBox&&PZcity._m.addClass("hide",n.cityBox),n.ul&&PZcity._m.addClass("hide",n.ul),n.myIframe&&PZcity._m.addClass("hide",n.myIframe)}),t.className="citySelector",t.style.position="absolute",t.style.left=e.left+"px",t.style.top=e.bottom+"px",t.style.zIndex=999999;var r=document.all?!0:!1,i=this.isIE6=r&&!window.XMLHttpRequest;if(i){var s=this.myIframe=document.createElement("iframe");s.frameborder="0",s.src="about:blank",s.style.position="absolute",s.style.zIndex="-1",this.rootDiv.appendChild(this.myIframe)}var o=this.cityBox=document.createElement("div");o.className="cityBox",o.id="cityBox",o.innerHTML=PZcity._template.join("");var u=this.hotCity=document.createElement("div");u.className="hotCity",o.appendChild(u),t.appendChild(o),this.createHotCity()},createHotCity:function(){var e,t,n,r,i=[],s,o,u,a,f=PZcity.regEx,l=PZcity.oCity;for(o in l){e=this[o]=document.createElement("div"),e.className=o+" "+"cityTab hide",a=[];for(u in l[o])a.push(u),a.sort();for(var c=0,h=a.length;c<h;c++){t=document.createElement("dl"),n=document.createElement("dt"),r=document.createElement("dd"),n.innerHTML=a[c]=="hot"?"&nbsp;":a[c],i=[];for(var p=0,d=l[o][a[c]].length;p<d;p++)s='<a href="#">'+l[o][a[c]][p]+"</a>",i.push(s);r.innerHTML=i.join(""),t.appendChild(n),t.appendChild(r),e.appendChild(t)}PZcity._m.removeClass("hide",this.hot),this.hotCity.appendChild(e)}document.body.appendChild(this.rootDiv),this.changeIframe(),this.tabChange(),this.linkEvent()},tabChange:function(){var e=PZcity._m.$("li",this.cityBox),t=PZcity._m.$("div",this.hotCity),n=this;for(var r=0,i=e.length;r<i;r++)e[r].index=r,e[r].onclick=function(){for(var r=0;r<i;r++)PZcity._m.removeClass("on",e[r]),PZcity._m.addClass("hide",t[r]);PZcity._m.addClass("on",this),PZcity._m.removeClass("hide",t[this.index]),n.changeIframe()}},linkEvent:function(){var e=PZcity._m.$("a",this.hotCity),t=this;for(var n=0,r=e.length;n<r;n++)e[n].onclick=function(){t.input.value=this.innerHTML,PZcity._m.addClass("hide",t.cityBox),PZcity._m.addClass("hide",t.myIframe)}},inputEvent:function(){var e=this;PZcity._m.on(this.input,"click",function(t){t=t||window.event,e.cityBox?!!e.cityBox&&PZcity._m.hasClass("hide",e.cityBox)&&(!e.ul||e.ul&&PZcity._m.hasClass("hide",e.ul))&&(PZcity._m.removeClass("hide",e.cityBox),PZcity._m.removeClass("hide",e.myIframe),e.changeIframe()):e.createWarp()}),PZcity._m.on(this.input,"focus",function(){e.input.select(),e.input.value=="城市名"&&(e.input.value="")}),PZcity._m.on(this.input,"blur",function(){e.input.value==""&&(e.input.value="城市名")}),PZcity._m.on(this.input,"keyup",function(t){t=t||window.event;var n=t.keyCode;PZcity._m.addClass("hide",e.cityBox),e.createUl(),PZcity._m.removeClass("hide",e.myIframe),e.ul&&!PZcity._m.hasClass("hide",e.ul)&&!e.isEmpty&&e.KeyboardEvent(t,n)})},createUl:function(){var e,t=PZcity._m.trim(this.input.value);if(t!==""){var n=new RegExp("^"+t+"|\\|"+t,"gi"),r=[];for(var i=0,s=PZcity.allCity.length;i<s;i++)if(n.test(PZcity.allCity[i])){var o=PZcity.regEx.exec(PZcity.allCity[i]);r.length!==0?e='<li><b class="cityname">'+o[1]+'</b><b class="cityspell">'+o[2]+"</b></li>":e='<li class="on"><b class="cityname">'+o[1]+'</b><b class="cityspell">'+o[2]+"</b></li>",r.push(e)}this.isEmpty=!1,r.length==0&&(this.isEmpty=!0,e='<li class="empty">对不起，没有找到数据 "<em>'+t+'</em>"</li>',r.push(e));if(!this.ul){var u=this.ul=document.createElement("ul");u.className="cityslide",this.rootDiv&&this.rootDiv.appendChild(u),this.count=0}else this.ul&&PZcity._m.hasClass("hide",this.ul)&&(this.count=0,PZcity._m.removeClass("hide",this.ul));this.ul.innerHTML=r.join(""),this.changeIframe(),this.liEvent()}else PZcity._m.addClass("hide",this.ul),PZcity._m.removeClass("hide",this.cityBox),PZcity._m.removeClass("hide",this.myIframe),this.changeIframe()},changeIframe:function(){if(!this.isIE6)return;this.myIframe.style.width=this.rootDiv.offsetWidth+"px",this.myIframe.style.height=this.rootDiv.offsetHeight+"px"},KeyboardEvent:function(e,t){var n=PZcity._m.$("li",this.ul),r=n.length;switch(t){case 40:this.count++,this.count>r-1&&(this.count=0);for(var i=0;i<r;i++)PZcity._m.removeClass("on",n[i]);PZcity._m.addClass("on",n[this.count]);break;case 38:this.count--,this.count<0&&(this.count=r-1);for(i=0;i<r;i++)PZcity._m.removeClass("on",n[i]);PZcity._m.addClass("on",n[this.count]);break;case 13:this.input.value=PZcity.regExChiese.exec(n[this.count].innerHTML)[0],PZcity._m.addClass("hide",this.ul),PZcity._m.addClass("hide",this.ul),PZcity._m.addClass("hide",this.myIframe);break;default:}},liEvent:function(){var e=this,t=PZcity._m.$("li",this.ul);for(var n=0,r=t.length;n<r;n++)PZcity._m.on(t[n],"click",function(t){t=PZcity._m.getEvent(t);var n=PZcity._m.getTarget(t);e.input.value=PZcity.regExChiese.exec(n.innerHTML)[0],PZcity._m.addClass("hide",e.ul),PZcity._m.addClass("hide",e.myIframe)}),PZcity._m.on(t[n],"mouseover",function(e){e=PZcity._m.getEvent(e);var t=PZcity._m.getTarget(e);PZcity._m.addClass("on",t)}),PZcity._m.on(t[n],"mouseout",function(e){e=PZcity._m.getEvent(e);var t=PZcity._m.getTarget(e);PZcity._m.removeClass("on",t)})}}})();